<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at 2017-04-25
 | Rendered using Hippo Forge Maven Skin 1.04.00 based on Apache Maven Fluido Skin
-->
<!--[if lt IE 7]><html id="ie6" xmlns="http://www.w3.org/1999/xhtml"  xml:lang="en" lang="en"><![endif]-->
<!--[if IE 7]><html id="ie7" xmlns="http://www.w3.org/1999/xhtml"  xml:lang="en" lang="en"><![endif]-->
<!--[if IE 8]><html id="ie8" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"><![endif]-->
<!--[if IE 9]><html id="ie9" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"><![endif]-->
<!--[if !IE]>--><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"><!--<![endif]-->

<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
                    <meta name="Date-Revision-yyyymmdd" content="20170425"/>
                <meta http-equiv="Content-Language" content="en"/>
        <title>Hippo Channel Manager Page Management Support &#x2013; Installing Hippo Channel Manager Page Management Support</title>
    <link rel="stylesheet" href="./css/forge-maven-skin-syntaxhighlighter-1.04.00.min.css"/>
    <link rel="stylesheet" href="./css/forge-maven-skin-1.04.00.min.css"/>
    <link rel="stylesheet" href="./css/site.css"/>
    <link rel="stylesheet" href="./css/print.css" media="print"/>

        
    <script type="text/javascript" src="./js/forge-maven-skin-syntaxhighlighter-1.04.00.min.js"></script>
    <script type="text/javascript" src="./js/forge-maven-skin-1.04.00.min.js"></script>

    
            </head>
    <body>

        
    
    
    <div class="container-fluid">
        <div class="row-fluid">
            <div id="header">
                <div id="logo">
                    <a href="http://www.onehippo.com">
                        <img src="./images/hipposkin/hippo-logo.png" alt="Hippo Logo" />
                    </a>
                </div>

                <h1>
                                            Hippo Channel Manager Page Management Support
                    
                </h1>
                <div class="clearfix"></div>
            </div>
        </div>

        <div class="row-fluid">
            <div id="breadcrumbs" class="clearfix">
                <ul class="breadcrumb">
                                
                                        
                            <li id="publishDate">Last Published: 2017-04-25</li>
                                                                                                                                                </ul>

                <div class="links">
                    <a href="https://www.onehippo.com">Onehippo.com</a>
                    <a href="https://www.onehippo.org">Onehippo.org</a>
                </div>
            </div>
        </div>



            
    <div class="row-fluid">
        <div id="leftColumn" class="span3">
            <div class="well sidebar-nav">
                <ul class="nav nav-list">
                                        <li class="nav-header">Main</li>
                                                           
        <li>
    
                                                <a href="index.html" title="Welcome">
                    <i class="none"></i>
                Welcome</a>
                    </li>
                               
        <li>
    
                                                <a href="architecture-view.html" title="Architecture">
                    <i class="none"></i>
                Architecture</a>
                    </li>
                               
        <li>
    
                                                <a href="install.html" title="Installation">
                    <i class="none"></i>
                Installation</a>
                    </li>
                               
        <li class="active">
    
                        <a href="#"><i class="none"></i>Custom Configuration</a>
                </li>
                               
        <li>
    
                                                <a href="apidocs/index.html" title="JavaDocs">
                    <i class="none"></i>
                JavaDocs</a>
                    </li>
                               
        <li>
    
                                                <a href="release-notes.html" title="Release Notes">
                    <i class="none"></i>
                Release Notes</a>
                    </li>
                                                            <li class="nav-header">Autogenerated Docs</li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               
        <li>
    
                                                <a href="project-info.html" title="Project Information">
                    <i class="icon-chevron-right"></i>
                Project Information</a>
                                </li>
                                                                                                                                                                                                                                                               
        <li>
    
                                                <a href="project-reports.html" title="Project Reports">
                    <i class="icon-chevron-right"></i>
                Project Reports</a>
                                </li>
                        </ul>

                
                <hr class="divider"/>

                <div id="poweredBy">
                                            <div class="clear"></div>
                                            <div class="clear"></div>
                                            <div class="clear"></div>
                                                <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
            <img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png"/>
        </a>
                            </div>
            </div>
        </div>
    
        
        <div id="bodyColumn"  class="span9" >
                                
            <!-- Copyright 2015-2017 Hippo

    Licensed under the Apache License, Version 2.0 (the  "License");
    you may not use this file except in compliance with the License.
    You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing, software
    distributed under the License is distributed on an "AS IS"
    BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    See the License for the specific language governing permissions and
    limitations under the License. -->
  

    <div class="section">
<h2><a name="Custom_Configuration"></a>Custom Configuration</h2>

      
<p>
        If you would like to change the default behaviors or customize the default implementation components
        for some reasons, then this page might help you.
      </p>

      
<div class="section">
<h3><a name="Custom_Configuration_for_DocumentCopyingPageCopyEventListener_component"></a>Custom Configuration for DocumentCopyingPageCopyEventListener component</h3>
        
<p>
          <tt>org.onehippo.forge.channelmanager.pagesupport.channel.event.DocumentCopyingPageCopyEventListener</tt>
          component copies linked documents in a page and its components from the source channel to the target channel
          on the event of page copying in the channel manager.
        </p>
        
<p>
          By default, the <tt>DocumentCopyingPageCopyEventListener</tt> component is provided by
          the built-in <a class="externalLink" href="http://www.onehippo.org/library/concepts/hst-spring/hst-addon-module-support.html">HST Addon Module</a>.
        </p>
        
<p>
          The original component bean configuration is defined in
          &quot;/src/main/resources/META-INF/hst-assembly/addon/org/onehippo/forge/channel-pagesup/cross-channel-page-copy-support.xml&quot;
          in the source.
        </p>
        
<p>
          If you want to extend or customize the bean,
          you can add a classpath resource (classpath:META-INF/hst-assembly/addon/org/onehippo/forge/channel-pagesup/cross-channel-page-copy-support.xml)
          in your SITE application to shadow the file with a custom bean definition.
          e.g, <tt>site/src/main/resources/META-INF/hst-assembly/addon/org/onehippo/forge/channel-pagesup/cross-channel-page-copy-support.xml</tt>
        </p>
        
<div class="section">
<h4><a name="Extension_Hooks"></a>Extension Hooks</h4>
        
<p>
          <b>Since version 1.2.0</b>, you can override <tt>DocumentCopyingPageCopyEventListener.onBeforePageCopyEvent(PageCopyEvent)</tt>
          and <tt>DocumentCopyingPageCopyEventListener.onAfterPageCopyEvent(PageCopyEvent)</tt>
          method to do something more just before and after the basic document content copying process.</p>
        
<p>
          For example, find all the document path HST component parameters in the HST page/component configurations and
          resolve the corresponding document path in case the relative document path changes to update the parameter value
          in the target page/component parameter value. See the following example:
        </p>
        
<div class="brush: java">
          
<div class="source"><pre class="prettyprint linenums">
package org.example;

public class MyDocumentCopyingPageCopyEventListener extends DocumentCopyingPageCopyEventListener {

    @Override
    protected void onAfterPageCopyEvent(PageCopyEvent pageCopyEvent) {
        final HstRequestContext requestContext = pageCopyContext.getRequestContext();

        final PageCopyContext pageCopyContext = pageCopyEvent.getPageCopyContext();
        final String sourceContentBasePath = pageCopyContext.getEditingMount().getContentPath().intern();
        final String targetContentBasePath = pageCopyContext.getTargetMount().getContentPath().intern();

        final Node newPageNode = pageCopyContext.getNewPageNode();

        // TODO: Maybe you can traverse newPageNode to find child component configuration nodes and investigate component parameter values
        //       to adjust somethings for your needs here...
    }
}
        </pre></div>
        </div>
        
<p>
          In case you want to override the default <tt>org.onehippo.forge.channelmanager.pagesupport.channel.event.DocumentCopyingPageCopyEventListener</tt>
          component, you can add an XML file in <tt>site/src/main/resources/META-INF/hst-assembly/addon/overrides/org/onehippo/forge/channel-pagesup/</tt> resource path.
          e.g, <tt>site/src/main/resources/META-INF/hst-assembly/addon/overrides/org/onehippo/forge/channel-pagesup/custom-page-copy-listener.xml</tt>.
          And, override the bean definition like the following example:
        </p>
        
<div class="brush: xml">
          
<div class="source"><pre class="prettyprint linenums">
&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;
       xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
       xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-4.1.xsd&quot;&gt;

  &lt;bean id=&quot;defaultDocumentCopyingPageCopyEventListener&quot;
        class=&quot;org.example.MyDocumentCopyingPageCopyEventListener&quot;
        init-method=&quot;init&quot; destroy-method=&quot;destroy&quot;&gt;
    &lt;!-- flag whether or not to copy all the documents linked by the page and its components --&gt;
    &lt;property name=&quot;copyDocumentsLinkedBySourcePage&quot; value=&quot;true&quot; /&gt;
  &lt;/bean&gt;
&lt;/beans&gt;
        </pre></div>
        </div>
      </div></div>

      
<div class="section">
<h3><a name="Custom_Configuration_for_DocumentManagementService_component"></a>Custom Configuration for DocumentManagementService component</h3>
        
<p>
          <tt>org.onehippo.forge.channelmanager.pagesupport.document.management.DocumentManagementService</tt> component is provided to manage document/folder workflows more easily.
        </p>
        
<p>
          The default implementation of <tt>DocumentManagementService</tt> is
          <tt>org.onehippo.forge.channelmanager.pagesupport.document.management.impl.DocumentWorkflowDocumentManagementService</tt>,
          and the component is registered by the <tt>DaemonModule</tt> implementation,
          <tt>org.onehippo.forge.channelmanager.pagesupport.document.management.impl.DocumentManagementServiceDaemonModule</tt>,
          with the following JCR configuration under <tt>/hippo:configuration/hippo:modules/</tt>:
        </p>
        
<div class="brush: xml">
          
<div class="source"><pre class="prettyprint linenums">
&lt;sv:node xmlns:sv=&quot;http://www.jcp.org/jcr/sv/1.0&quot; sv:name=&quot;channel-pagesup-document-management-service-module&quot;&gt;
  &lt;sv:property sv:name=&quot;jcr:primaryType&quot; sv:type=&quot;Name&quot;&gt;
    &lt;sv:value&gt;hipposys:module&lt;/sv:value&gt;
  &lt;/sv:property&gt;
  &lt;sv:property sv:name=&quot;hipposys:className&quot; sv:type=&quot;String&quot;&gt;
    &lt;sv:value&gt;org.onehippo.forge.channelmanager.pagesupport.document.management.impl.DocumentManagementServiceDaemonModule&lt;/sv:value&gt;
  &lt;/sv:property&gt;
  &lt;sv:node sv:name=&quot;hippo:moduleconfig&quot;&gt;
    &lt;sv:property sv:name=&quot;jcr:primaryType&quot; sv:type=&quot;Name&quot;&gt;
      &lt;sv:value&gt;nt:unstructured&lt;/sv:value&gt;
    &lt;/sv:property&gt;
  &lt;/sv:node&gt;
&lt;/sv:node&gt;
    </pre></div>
        </div>
        
<p>
          If you have to extend or customize the default <tt>DocumentManagementService</tt> component for some reasons,
          then you may extend or replace the class, <tt>org.onehippo.forge.channelmanager.pagesupport.document.management.impl.DocumentWorkflowDocumentManagementService</tt>,
          with a custom one (which must implement <tt>org.onehippo.forge.channelmanager.pagesupport.document.management.DocumentManagementService</tt>)
          and set the FQCN of your custom implementation class to a string property, named &quot;document.management.service&quot;,
          in <tt>hippo:moduleconfig</tt> node.
          For example, if your custom implementation is <tt>org.example.MyDocumentManagementService</tt>, then
          you can change the configuration like this:
        </p>
        
<div class="brush: xml">
          
<div class="source"><pre class="prettyprint linenums">
&lt;sv:node xmlns:sv=&quot;http://www.jcp.org/jcr/sv/1.0&quot; sv:name=&quot;channel-pagesup-document-management-service-module&quot;&gt;
  &lt;sv:property sv:name=&quot;jcr:primaryType&quot; sv:type=&quot;Name&quot;&gt;
    &lt;sv:value&gt;hipposys:module&lt;/sv:value&gt;
  &lt;/sv:property&gt;
  &lt;sv:property sv:name=&quot;hipposys:className&quot; sv:type=&quot;String&quot;&gt;
    &lt;sv:value&gt;org.onehippo.forge.channelmanager.pagesupport.document.management.impl.DocumentManagementServiceDaemonModule&lt;/sv:value&gt;
  &lt;/sv:property&gt;
  &lt;sv:node sv:name=&quot;hippo:moduleconfig&quot;&gt;
    &lt;sv:property sv:name=&quot;jcr:primaryType&quot; sv:type=&quot;Name&quot;&gt;
      &lt;sv:value&gt;nt:unstructured&lt;/sv:value&gt;
    &lt;/sv:property&gt;
    &lt;sv:property sv:name=&quot;document.management.service&quot; sv:type=&quot;String&quot; sv:multiple=&quot;false&quot;&gt;
      &lt;sv:value&gt;org.example.MyDocumentManagementService&lt;/sv:value&gt;
    &lt;/sv:property&gt;
  &lt;/sv:node&gt;
&lt;/sv:node&gt;
    </pre></div>
        </div>
      </div>

    </div>

  

            </div>
        </div>
    </div>

    <hr/>

    <footer>
                <div class="container-fluid">
                <div class="row span12">Copyright &copy;                                                2017.
                        All Rights Reserved.            
                                        
            </div>

        
        
                </div>
    </footer>
</body>
</html>
